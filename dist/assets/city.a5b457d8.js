import{c as ae,m as U,n as K,t as ke,J as se,e as oe,r as Je,d as ie,u as Qe,a as l,i as O,I as te,w as le,aL as Ce,aA as Ee,L as Ze,aM as et,aN as tt,q as nt,as as Ae,h as D,j as Re,aO as at,s as H,P as ot,am as it,x as he,z as ee,E as $e,l as me,aP as we,aQ as lt,p as ue,aR as ct,C as Pe,a5 as rt,aS as st,au as ut,o as dt,ao as ft,G as gt,av as ht,V as ve,Q as be,al as mt,aK as vt,A as Te,_ as Be,a1 as pe,X as A,Y as q,aH as Me,a0 as ye,a8 as J,a9 as ne,a6 as bt,ac as _e,a7 as xe,a3 as yt,ae as _t,af as xt}from"./index.4b6ab6fb.js";import{u as Oe,a as kt,T as Ct}from"./index.3399b2ea.js";import{a as de,u as It}from"./index.2f4e15c2.js";import{u as De}from"./city.470fbae3.js";const[St,X]=ae("cell"),Ne={tag:U("div"),icon:String,size:String,title:K,value:K,label:K,center:Boolean,isLink:Boolean,border:ke,required:Boolean,iconPrefix:String,valueClass:se,labelClass:se,titleClass:se,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},wt=oe({},Ne,Je);var Tt=ie({name:St,props:wt,setup(e,{slots:n}){const a=Qe(),s=()=>{if(n.label||O(e.label))return l("div",{class:[X("label"),e.labelClass]},[n.label?n.label():e.label])},i=()=>{var o;if(n.title||O(e.title)){const h=(o=n.title)==null?void 0:o.call(n);return Array.isArray(h)&&h.length===0?void 0:l("div",{class:[X("title"),e.titleClass],style:e.titleStyle},[h||l("span",null,[e.title]),s()])}},c=()=>{const o=n.value||n.default;if(o||O(e.value))return l("div",{class:[X("value"),e.valueClass]},[o?o():l("span",null,[e.value])])},v=()=>{if(n.icon)return n.icon();if(e.icon)return l(te,{name:e.icon,class:X("left-icon"),classPrefix:e.iconPrefix},null)},b=()=>{if(n["right-icon"])return n["right-icon"]();if(e.isLink){const o=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return l(te,{name:o,class:X("right-icon")},null)}};return()=>{var o;const{tag:h,size:u,center:L,border:x,isLink:m,required:S}=e,I=(o=e.clickable)!=null?o:m,R={center:L,required:S,clickable:I,borderless:!x};return u&&(R[u]=!!u),l(h,{class:X(R),role:I?"button":void 0,tabindex:I?0:void 0,onClick:a},{default:()=>{var B;return[v(),i(),c(),b(),(B=n.extra)==null?void 0:B.call(n)]}})}}});const ze=le(Tt);function Fe(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function Vt(e,n){if(Fe(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function Lt(e,n){return new Promise(a=>{const s=n.validator(e,n);if(et(s)){s.then(a);return}a(s)})}function Ve(e,n){const{message:a}=n;return tt(a)?a(e,n):a||""}function Et({target:e}){e.composing=!0}function Le({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function At(e,n){const a=Ce();e.style.height="auto";let s=e.scrollHeight;if(Ze(n)){const{maxHeight:i,minHeight:c}=n;i!==void 0&&(s=Math.min(s,i)),c!==void 0&&(s=Math.max(s,c))}s&&(e.style.height=`${s}px`,Ee(a))}function Rt(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function j(e){return[...e].length}function fe(e,n){return[...e].slice(0,n).join("")}const[$t,E]=ae("field"),Ie={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:K,formatter:Function,clearIcon:U("clear"),modelValue:nt(""),inputAlign:String,placeholder:String,autocomplete:String,errorMessage:String,enterkeyhint:String,clearTrigger:U("focus"),formatTrigger:U("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},Pt=oe({},Ne,Ie,{rows:K,type:U("text"),rules:Array,autosize:[Boolean,Object],labelWidth:K,labelClass:se,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Bt=ie({name:$t,props:Pt,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:a}){const s=Oe(),i=Ae({status:"unvalidated",focused:!1,validateMessage:""}),c=D(),v=D(),b=D(),{parent:o}=Re(at),h=()=>{var t;return String((t=e.modelValue)!=null?t:"")},u=t=>{if(O(e[t]))return e[t];if(o&&O(o.props[t]))return o.props[t]},L=H(()=>{const t=u("readonly");if(e.clearable&&!t){const g=h()!=="",d=e.clearTrigger==="always"||e.clearTrigger==="focus"&&i.focused;return g&&d}return!1}),x=H(()=>b.value&&a.input?b.value():e.modelValue),m=t=>t.reduce((g,d)=>g.then(()=>{if(i.status==="failed")return;let{value:_}=x;if(d.formatter&&(_=d.formatter(_,d)),!Vt(_,d)){i.status="failed",i.validateMessage=Ve(_,d);return}if(d.validator)return Fe(_)&&d.validateEmpty===!1?void 0:Lt(_,d).then(k=>{k&&typeof k=="string"?(i.status="failed",i.validateMessage=k):k===!1&&(i.status="failed",i.validateMessage=Ve(_,d))})}),Promise.resolve()),S=()=>{i.status="unvalidated",i.validateMessage=""},I=()=>n("endValidate",{status:i.status,message:i.validateMessage}),R=(t=e.rules)=>new Promise(g=>{S(),t?(n("startValidate"),m(t).then(()=>{i.status==="failed"?(g({name:e.name,message:i.validateMessage}),I()):(i.status="passed",g(),I())})):g()}),B=t=>{if(o&&e.rules){const{validateTrigger:g}=o.props,d=we(g).includes(t),_=e.rules.filter(k=>k.trigger?we(k.trigger).includes(t):d);_.length&&R(_)}},Y=t=>{var g;const{maxlength:d}=e;if(O(d)&&j(t)>d){const _=h();if(_&&j(_)===+d)return _;const k=(g=c.value)==null?void 0:g.selectionEnd;if(i.focused&&k){const V=[...t],P=V.length-+d;return V.splice(k-P,P),V.join("")}return fe(t,+d)}return t},N=(t,g="onChange")=>{const d=t;t=Y(t);const _=j(d)-j(t);if(e.type==="number"||e.type==="digit"){const V=e.type==="number";t=lt(t,V,V)}let k=0;if(e.formatter&&g===e.formatTrigger){const{formatter:V,maxlength:P}=e;if(t=V(t),O(P)&&j(t)>P&&(t=fe(t,+P)),c.value&&i.focused){const{selectionEnd:re}=c.value,Se=fe(d,re);k=j(V(Se))-j(Se)}}if(c.value&&c.value.value!==t)if(i.focused){let{selectionStart:V,selectionEnd:P}=c.value;if(c.value.value=t,O(V)&&O(P)){const re=j(t);_?(V-=_,P-=_):k&&(V+=k,P+=k),c.value.setSelectionRange(Math.min(V,re),Math.min(P,re))}}else c.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},Q=t=>{t.target.composing||N(t.target.value)},r=()=>{var t;return(t=c.value)==null?void 0:t.blur()},G=()=>{var t;return(t=c.value)==null?void 0:t.focus()},z=()=>{const t=c.value;e.type==="textarea"&&e.autosize&&t&&At(t,e.autosize)},f=t=>{i.focused=!0,n("focus",t),ee(z),u("readonly")&&r()},y=t=>{u("readonly")||(i.focused=!1,N(h(),"onBlur"),n("blur",t),B("onBlur"),ee(z),st())},C=t=>n("clickInput",t),T=t=>n("clickLeftIcon",t),w=t=>n("clickRightIcon",t),p=t=>{ue(t),n("update:modelValue",""),n("clear",t)},F=H(()=>{if(typeof e.error=="boolean")return e.error;if(o&&o.props.showError&&i.status==="failed")return!0}),M=H(()=>{const t=u("labelWidth");if(t)return{width:ot(t)}}),$=t=>{t.keyCode===13&&(!(o&&o.props.submitOnEnter)&&e.type!=="textarea"&&ue(t),e.type==="search"&&r()),n("keypress",t)},ce=()=>e.id||`${s}-input`,W=()=>i.status,He=()=>{const t=E("control",[u("inputAlign"),{error:F.value,custom:!!a.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(a.input)return l("div",{class:t,onClick:C},[a.input()]);const g={id:ce(),ref:c,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:u("disabled"),readonly:u("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,enterkeyhint:e.enterkeyhint,"aria-labelledby":e.label?`${s}-label`:void 0,onBlur:y,onFocus:f,onInput:Q,onClick:C,onChange:Le,onKeypress:$,onCompositionend:Le,onCompositionstart:Et};return e.type==="textarea"?l("textarea",g,null):l("input",Pe(Rt(e.type),g),null)},Ke=()=>{const t=a["left-icon"];if(e.leftIcon||t)return l("div",{class:E("left-icon"),onClick:T},[t?t():l(te,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},We=()=>{const t=a["right-icon"];if(e.rightIcon||t)return l("div",{class:E("right-icon"),onClick:w},[t?t():l(te,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Ue=()=>{if(e.showWordLimit&&e.maxlength){const t=j(h());return l("div",{class:E("word-limit")},[l("span",{class:E("word-num")},[t]),rt("/"),e.maxlength])}},Ye=()=>{if(o&&o.props.showErrorMessage===!1)return;const t=e.errorMessage||i.validateMessage;if(t){const g=a["error-message"],d=u("errorMessageAlign");return l("div",{class:E("error-message",d)},[g?g({message:t}):t])}},Ge=()=>{const t=u("colon")?":":"";if(a.label)return[a.label(),t];if(e.label)return l("label",{id:`${s}-label`,for:ce()},[e.label+t])},Xe=()=>[l("div",{class:E("body")},[He(),L.value&&l(te,{ref:v,name:e.clearIcon,class:E("clear")},null),We(),a.button&&l("div",{class:E("button")},[a.button()])]),Ue(),Ye()];return de({blur:r,focus:G,validate:R,formValue:x,resetValidation:S,getValidationStatus:W}),it(ct,{customValue:b,resetValidation:S,validateWithTrigger:B}),he(()=>e.modelValue,()=>{N(h()),S(),B("onChange"),ee(z)}),$e(()=>{N(h(),e.formatTrigger),ee(z)}),me("touchstart",p,{target:H(()=>{var t;return(t=v.value)==null?void 0:t.$el})}),()=>{const t=u("disabled"),g=u("labelAlign"),d=Ke(),_=()=>{const k=Ge();return g==="top"?[d,k].filter(Boolean):k||[]};return l(ze,{size:e.size,class:E({error:F.value,disabled:t,[`label-${g}`]:g}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:M.value,valueClass:E("value"),titleClass:[E("label",[g,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:d&&g!=="top"?()=>d:null,title:_,value:Xe,extra:a.extra})}}});const pt=le(Bt);function Mt(){const e="A".charCodeAt(0);return Array(26).fill("").map((a,s)=>String.fromCharCode(e+s))}const[je,ge]=ae("index-bar"),Ot={sticky:ke,zIndex:K,teleport:[String,Object],highlightColor:String,stickyOffsetTop:gt(0),indexList:{type:Array,default:Mt}},qe=Symbol(je);var Dt=ie({name:je,props:Ot,emits:["select","change"],setup(e,{emit:n,slots:a}){const s=D(),i=D(),c=D(""),v=It(),b=ut(s),{children:o,linkChildren:h}=dt(qe);let u;h({props:e});const L=H(()=>{if(O(e.zIndex))return{zIndex:+e.zIndex+1}}),x=H(()=>{if(e.highlightColor)return{color:e.highlightColor}}),m=(f,y)=>{for(let C=o.length-1;C>=0;C--){const T=C>0?y[C-1].height:0,w=e.sticky?T+e.stickyOffsetTop:0;if(f+w>=y[C].top)return C}return-1},S=f=>o.find(y=>String(y.index)===f),I=()=>{if(ht(s))return;const{sticky:f,indexList:y}=e,C=ve(b.value),T=be(b),w=o.map(F=>F.getRect(b.value,T));let p=-1;if(u){const F=S(u);if(F){const M=F.getRect(b.value,T);p=m(M.top,w)}}else p=m(C,w);c.value=y[p],f&&o.forEach((F,M)=>{const{state:$,$el:ce}=F;if(M===p||M===p-1){const W=ce.getBoundingClientRect();$.left=W.left,$.width=W.width}else $.left=null,$.width=null;if(M===p)$.active=!0,$.top=Math.max(e.stickyOffsetTop,w[M].top-C)+T.top;else if(M===p-1&&u===""){const W=w[p].top-C;$.active=W>0,$.top=W+T.top-w[M].height}else $.active=!1}),u=""},R=()=>{ee(I)};me("scroll",I,{target:b,passive:!0}),$e(R),he(()=>e.indexList,R),he(c,f=>{f&&n("change",f)});const B=()=>e.indexList.map(f=>{const y=f===c.value;return l("span",{class:ge("index",{active:y}),style:y?x.value:void 0,"data-index":f},[f])}),Y=f=>{u=String(f);const y=S(u);if(y){const C=ve(b.value),T=be(b),{offsetHeight:w}=document.documentElement;if(y.$el.scrollIntoView(),C===w-T.height){I();return}e.sticky&&e.stickyOffsetTop&&Ee(Ce()-e.stickyOffsetTop),n("select",y.index)}},N=f=>{const{index:y}=f.dataset;y&&Y(y)},Q=f=>{N(f.target)};let r;const G=f=>{if(v.move(f),v.isVertical()){ue(f);const{clientX:y,clientY:C}=f.touches[0],T=document.elementFromPoint(y,C);if(T){const{index:w}=T.dataset;w&&r!==w&&(r=w,N(T))}}},z=()=>l("div",{ref:i,class:ge("sidebar"),style:L.value,onClick:Q,onTouchstartPassive:v.start},[B()]);return de({scrollTo:Y}),me("touchmove",G,{target:i}),()=>{var f;return l("div",{ref:s,class:ge()},[e.teleport?l(ft,{to:e.teleport},{default:()=>[z()]}):z(),(f=a.default)==null?void 0:f.call(a)])}}});const[Nt,zt]=ae("index-anchor"),Ft={index:K};var jt=ie({name:Nt,props:Ft,setup(e,{slots:n}){const a=Ae({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),s=D(),{parent:i}=Re(qe);if(!i)return;const c=()=>a.active&&i.props.sticky,v=H(()=>{const{zIndex:o,highlightColor:h}=i.props;if(c())return oe(mt(o),{left:a.left?`${a.left}px`:void 0,width:a.width?`${a.width}px`:void 0,transform:a.top?`translate3d(0, ${a.top}px, 0)`:void 0,color:h})});return de({state:a,getRect:(o,h)=>{const u=be(s);return a.rect.height=u.height,o===window||o===document.body?a.rect.top=u.top+Ce():a.rect.top=u.top+ve(o)-h.top,a.rect}}),()=>{const o=c();return l("div",{ref:s,style:{height:o?`${a.rect.height}px`:void 0}},[l("div",{style:v.value,class:[zt({sticky:o}),{[vt]:o}]},[n.default?n.default():e.index])])}}});const qt=le(jt),Ht=le(Dt),[Kt,Z,Wt]=ae("search"),Ut=oe({},Ie,{label:String,shape:U("square"),leftIcon:U("search"),clearable:ke,actionText:String,background:String,showAction:Boolean});var Yt=ie({name:Kt,props:Ut,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:a,attrs:s}){const i=Oe(),c=D(),v=()=>{a.action||(n("update:modelValue",""),n("cancel"))},b=r=>{r.keyCode===13&&(ue(r),n("search",e.modelValue))},o=()=>e.id||`${i}-input`,h=()=>{if(a.label||e.label)return l("label",{class:Z("label"),for:o()},[a.label?a.label():e.label])},u=()=>{if(e.showAction){const r=e.actionText||Wt("cancel");return l("div",{class:Z("action"),role:"button",tabindex:0,onClick:v},[a.action?a.action():r])}},L=()=>{var r;return(r=c.value)==null?void 0:r.blur()},x=()=>{var r;return(r=c.value)==null?void 0:r.focus()},m=r=>n("blur",r),S=r=>n("focus",r),I=r=>n("clear",r),R=r=>n("clickInput",r),B=r=>n("clickLeftIcon",r),Y=r=>n("clickRightIcon",r),N=Object.keys(Ie),Q=()=>{const r=oe({},s,Te(e,N),{id:o()}),G=z=>n("update:modelValue",z);return l(pt,Pe({ref:c,type:"search",class:Z("field"),border:!1,onBlur:m,onFocus:S,onClear:I,onKeypress:b,onClickInput:R,onClickLeftIcon:B,onClickRightIcon:Y,"onUpdate:modelValue":G},r),Te(a,["left-icon","right-icon"]))};return de({focus:x,blur:L}),()=>{var r;return l("div",{class:Z({"show-action":e.showAction}),style:{background:e.background}},[(r=a.left)==null?void 0:r.call(a),l("div",{class:Z("content",e.shape)},[h(),Q()]),u()])}}});const Gt=le(Yt);const Xt={class:"city-list"},Jt={class:"hot-tags"},Qt=["onClick"],Zt={__name:"city-group",props:{groupData:{type:Object,default:()=>({})}},setup(e){const n=e,a=pe(),s=De(),i=H(()=>{const v=n.groupData.cities.map(b=>b.group);return v.unshift("#"),v}),c=v=>{s.currentCity=v,a.back()};return(v,b)=>{const o=qt,h=ze,u=Ht;return A(),q("div",Xt,[l(u,{"index-list":xe(i)},{default:Me(()=>{var L,x;return[l(o,{index:"\u70ED\u95E8"}),ye("div",Jt,[(A(!0),q(J,null,ne((L=e.groupData)==null?void 0:L.hotCities,m=>(A(),q("div",{class:"tag",onClick:S=>c(m),key:m.cityId},bt(m.cityName),9,Qt))),128))]),(A(!0),q(J,null,ne((x=e.groupData)==null?void 0:x.cities,(m,S)=>(A(),q(J,null,[l(o,{index:m.group},null,8,["index"]),(A(!0),q(J,null,ne(m.cities,I=>(A(),_e(h,{key:I.cityId,title:I.cityName,onClick:R=>c(I)},null,8,["title","onClick"]))),128))],64))),256))]}),_:1},8,["index-list"])])}}},en=Be(Zt,[["__scopeId","data-v-54977f61"]]);const tn={class:"city"},nn={class:"top"},an={class:"content"},on={__name:"city",setup(e){const n=pe(),a=De(),{allCities:s}=yt(a),i=D(""),c=D(""),v=()=>{n.back()};return a.fetchAllCitiesData(),(b,o)=>{const h=Gt,u=kt,L=Ct;return A(),q("div",tn,[ye("div",nn,[l(h,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=x=>i.value=x),"show-action":"",shape:"round",placeholder:"\u57CE\u5E02/\u533A\u57DF/\u4F4D\u7F6E",onCancel:v},null,8,["modelValue"]),l(L,{active:c.value,"onUpdate:active":o[1]||(o[1]=x=>c.value=x),color:"#ff9854"},{default:Me(()=>[(A(!0),q(J,null,ne(xe(s),(x,m,S)=>(A(),_e(u,{key:m,title:x.title,name:m},null,8,["title","name"]))),128))]),_:1},8,["active"])]),ye("div",an,[(A(!0),q(J,null,ne(xe(s),(x,m,S)=>_t((A(),_e(en,{key:m,"group-data":x},null,8,["group-data"])),[[xt,m===c.value]])),128))])])}}},un=Be(on,[["__scopeId","data-v-1a99b984"]]);export{un as default};
